<div *ngIf="lobby$ | async as lobby; else loading">
  <p>Ulazite u sobu: {{ lobby.name }}</p>
  <p>Tema sobe: {{ lobby.setName }}</p>
  <p>Nadimak:</p>
  <input [(ngModel)]="playerNickname" placeholder="nadimak" />
  <div *ngIf="set$ | async as set">
    <ng-container *ngIf="set.characters && set.characters.length">
      <div
        *ngFor="let character of notSelectedCharacters(set, lobby)"
        (click)="setSelected(character)"
      >
        <p>
          {{ character.name }}
          {{
            selectedCharacterAvatar == character.avatarUrl
              ? ' - SELEKTOVAN'
              : ''
          }}
        </p>
        <img [src]="character.avatarUrl" class="avatar" alt="avatar picture" />
      </div>
    </ng-container>
    <p-button
      label="Uđi u sobu"
      [disabled]="!parametersValid()"
      (onClick)="joinLobby()"
    ></p-button>
  </div>
</div>
<ng-template #loading>
  Učitavanje u toku...
</ng-template>
<p-dialog
  header="Ulazak u sobu"
  [(visible)]="showError"
  [modal]="true"
  [style]="{ width: '50vw' }"
  [baseZIndex]="10000"
>
  {{ errorText }}
  <p-footer>
    <p-button
      type="button"
      icon="pi pi-check"
      (click)="showError = false"
      label="Ok"
    ></p-button>
  </p-footer>
</p-dialog>
